---
import Layout from "@/layouts/layout.astro";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
  CardFooter
} from "@/components/ui/card";
import AccordionSection from "@/components/features/privacy/accordion-section";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";
import { Button } from "@/components/ui/button";
import { FileText, Shield, Lock, Eye, Building2, Download } from "lucide-react";

// Données de l'entreprise
const companyData = {
  name: "Guiose Frédéric EI",
  commercialName: "Portal Studio",
  siren: "100 283 050",
  siret: "10028305000019",
  address: "2 RUE des Patates Douces 97300 Cayenne FRANCE",
  activity: "Programmation informatique (6201Z)",
  email: "contact@portalstudio.fr",
  phone: "+594 694 95 58 17",
  website: "portalstudio.fr"
};

const lastUpdate = "02/02/2026";
---

<Layout>
  <main class="min-h-screen bg-background py-12 px-4 md:px-8 relative overflow-hidden">
    <div class="absolute top-0 left-0 w-full h-[500px] bg-linear-to-b from-primary/5 to-transparent -z-10 pointer-events-none"></div>

    <div class="max-w-4xl mx-auto space-y-8">
      
      <div class="text-center space-y-4 mb-12">
        <div class="inline-flex items-center justify-center p-3 bg-primary/10 rounded-full mb-4">
          <Shield className="w-8 h-8 text-primary" />
        </div>
        <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-foreground">Politique de Confidentialité</h1>
        <p class="text-muted-foreground text-lg max-w-2xl mx-auto">
          La protection de vos données est au cœur de nos préoccupations. Voici comment nous traitons vos informations en toute transparence.
        </p>
        <Badge variant="outline" className="mt-4 text-md py-1 px-4 border-primary/20 bg-background/50 backdrop-blur">
          Mise à jour le {lastUpdate}
        </Badge>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        
        <!-- Main Content (Policies) -->
        <div class="md:col-span-2 space-y-6 h-full">
          <Card className="border-none shadow-lg bg-card/50 backdrop-blur-sm">
            <CardHeader>
              <CardTitle className="text-2xl flex items-center gap-2">
                <FileText className="w-5 h-5 text-primary" />
                Vos Données
              </CardTitle>
              <CardDescription>
                Détails sur la collecte et l'utilisation de vos informations personnelles.
              </CardDescription>
            </CardHeader>
            <CardContent>
              <AccordionSection companyData={companyData} client:visible/>
            </CardContent>
          </Card>

          <Card className="border-none shadow-lg bg-card/50 backdrop-blur-sm">
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Lock className="w-5 h-5" />
                Confidentialité
              </CardTitle>
            </CardHeader>
            <CardContent>
              <p class="text-sm opacity-90">
                Nous nous engageons à ne jamais vendre vos données personnelles. Votre vie privée est respectée.
              </p>
            </CardContent>
          </Card>
        </div>

        <!-- Sidebar (Legal Info) -->
        <div class="space-y-6">
          <Card className="shadow-lg border-primary/10 h-full gap-1">
            <CardHeader className="pb-2">
              <CardTitle className="text-xl flex items-center gap-2">
                <Building2 className="w-5 h-5 text-primary" />
                Informations Légales
              </CardTitle>
            </CardHeader>
            <CardContent className="flex flex-col gap-3">
              
              <div class="space-y-1">
                <p class="font-semibold text-foreground">Dénomination</p>
                <p class="text-muted-foreground">{companyData.name}</p>
                 <p class="text-muted-foreground text-xs">{companyData.commercialName}</p>
              </div>
              
              <Separator />

              <div class="space-y-1">
                <p class="font-semibold text-foreground">Siège Social</p>
                <p class="text-muted-foreground">{companyData.address}</p>
              </div>

               <Separator />

              <div class="space-y-1">
                <p class="font-semibold text-foreground">Immatriculation</p>
                <div class="flex flex-col gap-1">
                    <p class="text-muted-foreground">SIREN : {companyData.siren}</p>
                    <p class="text-muted-foreground">SIRET : {companyData.siret}</p>
                    <p class="text-muted-foreground">APE : {companyData.activity}</p>
                </div>
              </div>

              <Separator />

              <div class="space-y-1">
                <p class="font-semibold text-foreground">Contact</p>
                <p class="text-muted-foreground"><a href={`mailto:${companyData.email}`} class="hover:text-primary transition-colors">{companyData.email}</a></p>
                <p class="text-muted-foreground">{companyData.phone}</p>
              </div>

            </CardContent>
            <CardFooter className="pt-4 h-full flex items-end">
               <a href='https://data.inpi.fr/export/companies?format=pdf&ids=["100283050"]&est=all'><Button variant="outline" className="w-full gap-2 text-xs">
                 <Download className="w-3 h-3" />
                 Télécharger l'attestation RNE
               </Button></a>
            </CardFooter>
          </Card>

        </div>

      </div>
    </div>
  </main>
</Layout>